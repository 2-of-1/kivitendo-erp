[% USE HTML %]<body class="admin">

 <script type="text/javascript" src="js/common.js"></script>
 <script type="text/javascript">
  <!--
      function open_connection_test_window() {
        // host name port user passwd
        var url = "admin.pl?action=test_db_connection&" +
          "dbhost="   + encodeURIComponent(get_input_value("dbhost"))   + "&" +
          "dbname="   + encodeURIComponent(get_input_value("dbname"))   + "&" +
          "dbuser="   + encodeURIComponent(get_input_value("dbuser"))   + "&" +
          "dbpasswd=" + encodeURIComponent(get_input_value("dbpasswd")) + "&";

        var parm = centerParms(400,300) + ",width=400,height=300,status=yes,scrollbars=yes";

        window.open(url, "_new_generic", parm);
      }
    -->
 </script>

 <form name="Form" method="post" action="admin.pl">

  <div class="listtop" width="100%">[% title %]</div>

  <table width="100%">
   <tr valign="top">
    <td>
     <table>
      <tr>
       <th align="right">Anmeldung</th>
       <td>[% IF edit %]<input type="hidden" name="login" value="[% HTML.escape(myc_login) %]">[% HTML.escape(myc_login) %][% ELSE %]<input name="login" value="[% HTML.escape(myc_login) %]">[% END %]</td>
      </tr>

      <tr>
       <th align="right">Passwort</th>
       <td>[% IF CAN_CHANGE_PASSWORD %]<input type="password" name="new_password" size="8" value="********">[% ELSE %]********[% END %]</td>
      </tr>

      <tr>
       <th align="right">Name</th>
       <td><input name="name" size="15" value="[% HTML.escape(myc_name) %]"></td>
      </tr>

      <tr>
       <th align="right">eMail</th>
       <td><input name="email" size="30" value="[% HTML.escape(myc_email) %]"></td>
      </tr>

      <tr valign="top">
       <th align="right">Unterschrift</th>
       <td><textarea name="signature" rows="3" cols="35">[% HTML.escape(myc_signature) %]</textarea></td>
      </tr>

      <tr>
       <th align="right">Telefon</th>
       <td><input name="tel" size="14" value="[% HTML.escape(myc_tel) %]"></td>
      </tr>

      <tr>
       <th align="right">Fax</th>
       <td><input name="fax" size="14" value="[% HTML.escape(myc_fax) %]"></td>
      </tr>

      <tr>
       <th align="right">Firma</th>
       <td><input name="company" size="35" value="[% HTML.escape(myc_company) %]"></td>
      </tr>

      <tr valign="top">
       <th align="right">Adresse</th>
       <td><textarea name="address" rows="4" cols="35">[% HTML.escape(myc_address) %]</textarea></td>
      </tr>

      <tr valign="top">
       <th align="right">Steuernummer</th>
       <td><input name="taxnumber" size="14" value="[% HTML.escape(myc_taxnumber) %]"></td>
      </tr>

      <tr valign="top">
       <th align="right">USt-IdNr.</th>
       <td><input name="co_ustid" size="14" value="[% HTML.escape(myc_co_ustid) %]"></td>
      </tr>

      <tr valign="top">
       <th align="right">DUNS-Nr.</th>
       <td><input name="duns" size="14" value="[% HTML.escape(myc_duns) %]"></td>
      </tr>
     </table>
    </td>

    <td>
     <table>
      <tr>
       <th align="right">Datumsformat</th>
       <td>
        <select name="dateformat">
         [% FOREACH row = ALL_DATEFORMATS %]<option [% IF row.selected %]selected[% END %]>[% HTML.escape(row.format) %]</option>
         [% END %]
        </select>
       </td>
      </tr>

      <tr>
       <th align="right">Zahlenformat</th>
       <td>
        <select name="numberformat">
         [% FOREACH row = ALL_NUMBERFORMATS %]<option [% IF row.selected %]selected[% END %]>[% HTML.escape(row.format) %]</option>
         [% END %]
        </select>
       </td>
      </tr>

      <tr>
       <th align="right">Auswahllistenbegrenzung</th>
       <td><input name="vclimit" value="[% HTML.escape(myc_vclimit) %]"></td>
      </tr>

      <tr>
       <th align="right">Sprache</th>
       <td>
        <select name="countrycode">
         [% FOREACH row = ALL_COUNTRYCODES %]<option value="[% HTML.escape(row.value) %]" [% IF row.selected %]selected[% END %]>[% HTML.escape(row.name) %]</option>
         [% END %]
        </select>
       </td>
      </tr>

      <tr>
       <th align="right">Stilvorlage</th>
       <td>
        <select name="userstylesheet">
         [% FOREACH row = ALL_STYLESHEETS %]<option [% IF row.selected %]selected[% END %]>[% HTML.escape(row.name) %]</option>
         [% END %]
        </select>
       </td>
      </tr>

      <tr>
       <th align="right">Drucker</th>
       <td><input name="printer" size="20" value="[% HTML.escape(myc_printer) %]"></td>
      </tr>
      <tr>
       <th align="right">benutze Vorlagen</th>
       <td>
        <select name="usetemplates">
         [% FOREACH row = ALL_TEMPLATES %]<option [% IF row.selected %]selected[% END %]>[% HTML.escape(row.name) %]</option>
         [% END %]
        </select>
       </td>
      </tr>
      <tr>
       <th align="right">neue Vorlagen</th>
       <td><input name="newtemplates"></td>
      </tr>
      <tr>
       <th align="right">Vorlagen auswählen</th>
       <td>
        <select name="mastertemplates">
         [% FOREACH row = ALL_MASTER_TEMPLATES %]<option [% IF row.selected %]selected[% END %]>[% HTML.escape(row.name) %]</option>
         [% END %]
        </select>
       </td>
      </tr>
      <tr>
       <th align="right">Menüsetup</th>
       <td>
        <select name="menustyle">
         <option value="v3"[% IF menustyle_v3 %] selected[% END %]>Oben (mit CSS)</option>
         <option value="neu"[% IF menustyle_neu %] selected[% END %]>Oben (mit Javascript)</option>
         <option value="xml"[% IF menustyle_xml %] selected[% END %]>Oben (XUL; nur f&uuml;r Mozilla Firefox)</option>
         <option value="old"[% IF menustyle_old %] selected[% END %]>Alt (seitlich)</option>
        </select>
       </td>
      </tr>

      <input type="hidden" name="templates" value="[% HTML.escape(myc_templates) %]">
     </table>
    </td>
   </tr>

   <tr class="listheading">
    <th colspan="2">Datenbank</th>
   </tr>

   <tr>
    <td colspan="2">
     <table>
      <tr>
       <th align="right">Treiber</th>
       <td>PostgreSQL</td>
       <th align="right">Datenbankcomputer</th>
       <td><input name="dbhost" size="30" value="[% HTML.escape(myc_dbhost) %]"></td>
      </tr>

      <tr>
       <th align="right">Datenbank</th>
       <td><input name="dbname" size="15" value="[% HTML.escape(myc_dbname) %]"></td>
       <th align="right">Port</th>
       <td><input name="dbport" size="4" value="[% HTML.escape(myc_dbport) %]"></td>
      </tr>

      <tr>
       <th align="right">Benutzer</th>
       <td><input name="dbuser" size="15" value="[% HTML.escape(myc_dbuser) %]"></td>
       <th align="right">Passwort</th>
       <td><input name="dbpasswd" type="password" size="10" value="[% HTML.escape(myc_dbpasswd) %]"></td>
      </tr>

      <tr>
       <td colspan="2"><input type="button" class="submit" onclick="open_connection_test_window();" value="Verbindung testen"></td>
      </tr>
     </table>
    </td>
   </tr>

   <tr><td colspan="2"><hr size="3" noshade></td></tr>

   <tr class="listheading">
    <th colspan="2">WEBDAV-Zugriff</th>
   </tr>

   <tr>
    <td colspan="2">
     <table>
      <tr>
       <td>
        <input name="angebote" id="angebote"class="checkbox" type="checkbox" value="1" [% IF myc_angebote %]checked[% END %]>
        <label for="angebote">&nbsp;Angebot</label>
       </td>
       <td>
        <input name="bestellungen" id="bestellungen" class="checkbox" type="checkbox" value="1" [% IF myc_bestellungen %]checked[% END %]>
        <label for="bestellungen">&nbsp;Bestellung</label>
       </td>
       <td>
        <input name="rechnungen" id="rechnungen" class="checkbox" type="checkbox" value="1" [% IF myc_rechnung %]checked[% END %]>
        <label for="rechnungen">&nbsp;Rechnung</label>
       </td>
      </tr>

      <tr>
       <td>
        <input name="anfragen" id="anfragen" class="checkbox" type="checkbox" value="1" [% IF myc_anfragen %]checked[% END %]>
        <label for="anfragen">&nbsp;Anfragen</label>
       </td>
       <td>
        <input name="lieferantenbestellungen" id="lieferantenbestellungen" class="checkbox" type="checkbox" value="1" [% IF myc_lieferantenbestellungen %]checked[% END %]>
        <label for="lieferantenbestellungen">&nbsp;Lieferantenbestellung</label>
       </td>
       <td>
        <input name="einkaufsrechnungen" id="einkaufsrechnungen" class="checkbox" type="checkbox" value="1" [% IF myc_einkaufsrechnungen %]checked[% END %]>
        <label for="einkaufsrechnungen">&nbsp;Einkaufsrechnung</label>
       </td>
      </tr>
     </table>
    </td>
   </tr>

   [% IF edit %]
   <tr><td colspan="2"><hr size="3" noshade></td></tr>

   <tr class="listheading">
    <th colspan="2">Grouppenzugeh&ouml;rigkeit</th>
   </tr>

   <tr>
    <td colspan="2">Der Benutzer ist Mitglied in den folgenden Gruppen:</td>
   </tr>

   <tr>
    <td colspan="2">[% FOREACH row = GROUPS %]<a href="admin.pl?action=edit_group&group_id=[% HTML.url(row.id) %]">[% HTML.escape(row.name) %]</a>
     [% UNLESS loop.last %] | [% END %][% END %]</td>
   </tr>
   [% END %]

   <tr><td colspan="2"><hr size="3" noshade></td></tr>

  </table>

  <input name="callback" type="hidden" value="admin.pl?action=list_users">

  <input type="submit" class="submit" name="action" value="Speichern">

  [% IF edit %]
   <input type="submit" class="submit" name="action" value="Löschen">
   <input type="hidden" name="edit" value="1">
  [% END %]

 </form>

</body>
</html>
