[%- USE T8 %]
[% USE HTML %]<div class="listtop">[% 'Step 1 of 3: Parts' | $T8 %]</div>

<form name="Form" method="post" action="login.pl">

 <input type="hidden" name="unit_type" value="dimension">
 <input type="hidden" name="action" value="login">
 <input type="hidden" name="action2" value="">

 [% IF saved_message %]
  <p>[% saved_message %]</p>
 [% END %]

 <div class="subsubheading">[% 'Add unit' | $T8 %]</div>

 <p>
  [%- 'For each unit there\'s either no or exactly one base unit. If you chose a base unit then you also have to chose a factor. That way the new unit will be defined as a multiple of the base unit. The base unit must be the &quot;smaller&quot; one. A factor may not be less than 1. Therefore you may define &quot;kg&quot; with the base unit &quot;g&quot; and a factor of &quot;1&quot;, but not the other way round.' | $T8 %]
 </p>

 <p>
  [% 'The following units exist already:' | $T8 %]
  [% FOREACH row = NEW_BASE_UNIT_DDBOX %][% IF row.name %][% HTML.escape(row.name) %][% UNLESS loop.last %]; [% END %][% END %][% END %]
 </p>

 <hr>

 <table>
  <tr>
   <th align="right">[% 'Unit' | $T8 %]</th>
   <td><input name="new_name" size="20" maxlength="20"></td>
  </tr>
  <tr>
   <th align="right">[% 'Base unit' | $T8 %]</th>
   <td>
    <select name="new_base_unit">
     [% FOREACH row = NEW_BASE_UNIT_DDBOX %]<option [% row.selected %]>[% row.name %]</option>[% END %]
    </select>
   </td>
  </tr>
  <tr>
   <th align="right">[% 'Factor' | $T8 %]</th>
   <td><input name="new_factor"></td>
  </tr>
 </table>

 <input type="submit" onclick="document.Form.action2.value = 'add_unit'; document.Form.submit();" name="dummy" value="[% 'Add unit' | $T8 %]">

 <hr>

 <div class="subsubheading">[% 'Assign new units' | $T8 %]</div>

 <p>
  [% 'The following units are unknown.' | $T8 %]
  [% 'You have to chose which unit to save for each of them.' | $T8 %]
 </p>

 <table>
  <tr>
   <th class="listheading">[% 'Current unit' | $T8 %]</th>
   <th class="listheading">[% 'New unit' | $T8 %]</th>
  </tr>

  [% FOREACH row = UNKNOWN_PART_UNITS %]
   <tr class="listrow[% loop.count % 2 %]">
    <td>
     [% HTML.escape(row.name) %]
     <input type="hidden" name="old_unit_[% loop.count %]" value="[% HTML.escape(row.name) %]">
    </td>
    <td>
     <select name="new_unit_[% loop.count %]">
      [% FOREACH row_new = row.NEW_UNITS %]<option>[% HTML.escape(row_new.name) %]</option>[% END %]
     </select>
    </td>
    [% IF loop.last %]<input type="hidden" name="rowcount" value="[% loop.count %]">[% END %]
  [% END %]
 </table>

 <input type="submit" onclick="document.Form.action2.value = 'assign_units'; document.Form.submit();" name="dummy" value="[% 'Assign units' | $T8 %]">

</form>

