[% USE HTML %]
[% USE T8 %]
[% USE L %]
[% USE P %]
[% USE LxERP %]

<form action="controller.pl" method="post" name="Form" id="search_form">
<div class="wrapper">

<div class='filter_toggle'>
<a href='#' onClick='javascript:$(".filter_toggle").toggle()' class="button toggle off neutral">[% 'Show Filter' | $T8 %]</a>
  [% SELF.filter_summary | html %]
</div>

<div class='filter_toggle' style='display:none'>
  <a href='#' onClick='javascript:$(".filter_toggle").toggle()' class="button toggle on neutral with-panel">[% 'Hide Filter' | $T8 %]</a>
  <div class="filter-toggle-panel">
  
  <table id='filter_table' class="tbl-horizontal">
    <tbody>
      <tr>
        <th>[% 'Letternumber' | $T8 %]</th>
        <td>[% L.input_tag('filter.letternumber:substr::ilike', filter.letternumber_substr__ilike, style='width:250px') %]</th>
      </tr>
      [% IF SELF.is_sales %] 
        <tr>
          <td>[% 'Customer' | $T8 %]</td>
          <td>[% P.customer_vendor.picker('filter.customer_id', filter.customer_id, type='customer', style='width:250px') %]</td>
        </tr>
      [% ELSE %] 
        <tr>
          <td>[% 'Vendor' | $T8 %]</td>
          <td>[% P.customer_vendor.picker('filter.vendor_id', filter.vendor_id, type='vendor', style='width:250px') %]</td>
        </tr>
      [% END %] 
      <tr>
        <td>[% 'Contact' | $T8 %]</td>
        <td>[% L.input_tag('filter.contact.cp_name:substr::ilike', filter.contact.cp_name_substr__ilike, style='width:250px') %]</th>
      </tr>
      <tr>
        <td>[% 'Subject' | $T8 %]</td>
        <td>[% L.input_tag('filter.subject:substr::ilike', filter.subject_substr__ilike, style='width:250px') %]</th>
      </tr>
      <tr>
        <td>[% 'Body' | $T8 %]</td>
        <td>[% L.input_tag('filter.body:substr::ilike', filter.body_substr__ilike, style='width:250px') %]</th>
      </tr>
      <tr>
        <td>[% 'From' | $T8 %]</td>
        <td>[% L.date_tag('filter.date:date::ge', filter.date_date__ge) %] [% 'To (time)' | $T8 %] [% L.date_tag('filter.date:date::le', filter.date_date__le) %]</td>
      </tr>
    </tbody>
  </table>

  [% L.hidden_tag('is_sales', SELF.is_sales) %]
  [% L.hidden_tag('sort_by', FORM.sort_by) %]
  [% L.hidden_tag('sort_dir', FORM.sort_dir) %]
  [% L.hidden_tag('page', FORM.page) %]
  <div class="buttons">
    [% L.button_tag("\$('#search_form').resetForm()", LxERP.t8("Reset")) %]
  </div>
    
  </div><!-- /.filter-toggle-panel -->
</div><!-- /.filter_toggle -->

</div>
</form>
